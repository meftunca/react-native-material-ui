var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _color=_interopRequireDefault(require("color"));var _jsxFileName="/Users/devloops/Desktop/reactNative/reactNativeMUI/src/Components/Core/Ripple.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var radius=10;var styles=_reactNative.StyleSheet.create({container:_objectSpread({},_reactNative.StyleSheet.absoluteFillObject,{backgroundColor:'transparent',overflow:'hidden'}),ripple:{width:radius*2,height:radius*2,borderRadius:radius,overflow:'hidden',position:'absolute'}});var Ripple=function Ripple(_ref){var _ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,hitSlop=_ref.hitSlop,pressRetentionOffset=_ref.pressRetentionOffset,children=_ref.children,_ref$rippleContainerB=_ref.rippleContainerBorderRadius,rippleContainerBorderRadius=_ref$rippleContainerB===void 0?5:_ref$rippleContainerB,testID=_ref.testID,_ref$nativeID=_ref.nativeID,nativeID=_ref$nativeID===void 0?Number(Math.random()*100).toString():_ref$nativeID,_ref$accessible=_ref.accessible,accessible=_ref$accessible===void 0?false:_ref$accessible,onPressIn=_ref.onPressIn,onPressOut=_ref.onPressOut,_ref$delayPressIn=_ref.delayPressIn,delayPressIn=_ref$delayPressIn===void 0?150:_ref$delayPressIn,_ref$delayPressOut=_ref.delayPressOut,delayPressOut=_ref$delayPressOut===void 0?150:_ref$delayPressOut,_ref$delayLongPress=_ref.delayLongPress,delayLongPress=_ref$delayLongPress===void 0?360:_ref$delayLongPress,accessibilityHint=_ref.accessibilityHint,accessibilityLabel=_ref.accessibilityLabel,onPress=_ref.onPress,onLongPress=_ref.onLongPress,buttonRef=_ref.buttonRef,onLayout=_ref.onLayout,_ref$onRippleAnimatio=_ref.onRippleAnimation,onRippleAnimation=_ref$onRippleAnimatio===void 0?function(animation,callback){return animation.start(callback);}:_ref$onRippleAnimatio,_ref$rippleColor=_ref.rippleColor,rippleColor=_ref$rippleColor===void 0?'rgb(0, 0, 0)':_ref$rippleColor,_ref$rippleOpacity=_ref.rippleOpacity,rippleOpacity=_ref$rippleOpacity===void 0?0.4:_ref$rippleOpacity,_ref$rippleDuration=_ref.rippleDuration,rippleDuration=_ref$rippleDuration===void 0?350:_ref$rippleDuration,_ref$rippleSize=_ref.rippleSize,rippleSize=_ref$rippleSize===void 0?0:_ref$rippleSize,_ref$rippleCentered=_ref.rippleCentered,rippleCentered=_ref$rippleCentered===void 0?false:_ref$rippleCentered,_ref$rippleSequential=_ref.rippleSequential,rippleSequential=_ref$rippleSequential===void 0?false:_ref$rippleSequential,_ref$rippleFades=_ref.rippleFades,rippleFades=_ref$rippleFades===void 0?true:_ref$rippleFades,props=(0,_objectWithoutProperties2.default)(_ref,["disabled","hitSlop","pressRetentionOffset","children","rippleContainerBorderRadius","testID","nativeID","accessible","onPressIn","onPressOut","delayPressIn","delayPressOut","delayLongPress","accessibilityHint","accessibilityLabel","onPress","onLongPress","buttonRef","onLayout","onRippleAnimation","rippleColor","rippleOpacity","rippleDuration","rippleSize","rippleCentered","rippleSequential","rippleFades"]);var _useState=(0,_react.useState)({width:0,height:0,ripples:[]}),_useState2=(0,_slicedToArray2.default)(_useState,2),state=_useState2[0],setBaseState=_useState2[1];var backgroundColorRipple=(0,_react.useRef)(new _reactNative.Animated.Value(0)).current;var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),mounted=_useState4[0],setMounted=_useState4[1];var setState=function setState(newState){return setBaseState(_objectSpread({},state,{},newState));};(0,_react.useEffect)(function(){setMounted(true);return function(){setMounted(false);backgroundColorRipple.stopAnimation();backgroundColorRipple.removeAllListeners();setState({width:0,height:0,ripples:[]});};},[]);var onLayoutFunc=function onLayoutFunc(event){var _event$nativeEvent$la=event.nativeEvent.layout,width=_event$nativeEvent$la.width,height=_event$nativeEvent$la.height;if('function'===typeof onLayout){onLayout(event);setState({width:width,height:height});}},onPressFunc=function onPressFunc(event){var ripples=state.ripples;if(!rippleSequential||!ripples.length){if('function'===typeof onPress){requestAnimationFrame(function(){return onPress(event);});startRipple(event);}}},onLongPressFunc=function onLongPressFunc(event){if('function'===typeof onLongPress){requestAnimationFrame(function(){return onLongPress(event);});_reactNative.Animated.timing(backgroundColorRipple,{toValue:1,duration:rippleDuration,easing:_reactNative.Easing.bounce}).start();startRipple(event);}else if('function'===typeof onPress){_reactNative.Animated.timing(backgroundColorRipple,{toValue:1,duration:rippleDuration,easing:_reactNative.Easing.bounce}).start();startRipple(event);}},onPressInFunc=function onPressInFunc(event){if('function'===typeof onPressIn){onPressIn(event);}},onPressOutFunc=function onPressOutFunc(event){if('function'===typeof onPressOut){onPressOut(event);_reactNative.Animated.timing(backgroundColorRipple,{toValue:0,duration:rippleDuration,easing:_reactNative.Easing.bounce,delay:rippleDuration*5}).start();}else if('function'===typeof onPress){_reactNative.Animated.timing(backgroundColorRipple,{toValue:0,duration:rippleDuration,easing:_reactNative.Easing.linear,delay:rippleDuration*5}).start();}},onAnimationEnd=function onAnimationEnd(){if(mounted){setState(_objectSpread({},state,{ripples:state.ripples.slice(1)}));}},startRipple=function startRipple(event){var width=state.width,height=state.height;var w2=0.5*width;var h2=0.5*height;var _ref2=rippleCentered?{locationX:w2,locationY:h2}:event.nativeEvent,locationX=_ref2.locationX,locationY=_ref2.locationY;var offsetX=Math.abs(w2-locationX);var offsetY=Math.abs(h2-locationY);var R=rippleSize>0?0.5*rippleSize:Math.sqrt(Math.pow(w2+offsetX,2)+Math.pow(h2+offsetY,2));var ripple={unique:Date.now()*Math.random(),progress:new _reactNative.Animated.Value(0),locationX:locationX,locationY:locationY,R:R};var animation=_reactNative.Animated.timing(ripple.progress,{toValue:1,easing:_reactNative.Easing.out(_reactNative.Easing.ease),duration:rippleDuration,useNativeDriver:true});onRippleAnimation(animation,onAnimationEnd);setState({ripples:state.ripples.concat(ripple)});},renderRipple=function renderRipple(_ref3){var _rippleStyle;var unique=_ref3.unique,progress=_ref3.progress,locationX=_ref3.locationX,locationY=_ref3.locationY,R=_ref3.R;var rippleStyle=(_rippleStyle={top:locationY?locationY-radius:0},(0,_defineProperty2.default)(_rippleStyle,_reactNative.I18nManager.isRTL?'right':'left',locationX?locationX-radius:0),(0,_defineProperty2.default)(_rippleStyle,"backgroundColor",rippleColor),(0,_defineProperty2.default)(_rippleStyle,"transform",[{scale:progress.interpolate({inputRange:[0,1],outputRange:[0.5/radius,R/radius]})}]),(0,_defineProperty2.default)(_rippleStyle,"opacity",rippleFades?progress.interpolate({inputRange:[0,1],outputRange:[rippleOpacity,0]}):rippleOpacity),_rippleStyle);return _react.default.createElement(_reactNative.Animated.View,{pointerEvents:"none",style:[styles.ripple,rippleStyle],key:unique,__source:{fileName:_jsxFileName,lineNumber:235}});};var touchableProps=_objectSpread({delayLongPress:delayLongPress,delayPressIn:delayPressIn,delayPressOut:delayPressOut,disabled:disabled,hitSlop:hitSlop,pressRetentionOffset:pressRetentionOffset,testID:testID,accessible:accessible,accessibilityHint:accessibilityHint,accessibilityLabel:accessibilityLabel,onLayout:onLayoutFunc,onPress:onPressFunc,onPressIn:onPressInFunc,onPressOut:onPressOutFunc,buttonRef:buttonRef,onLongPress:onLongPressFunc?onLongPressFunc:undefined},'web'!==_reactNative.Platform.OS?{nativeID:nativeID}:{});return _react.default.createElement(_reactNative.View,{ref:buttonRef,__source:{fileName:_jsxFileName,lineNumber:263}},_react.default.createElement(_reactNative.TouchableWithoutFeedback,(0,_extends2.default)({accessibilityRole:"button"},touchableProps,{__source:{fileName:_jsxFileName,lineNumber:264}}),_react.default.createElement(_reactNative.View,(0,_extends2.default)({},props,{onResponderGrant:function onResponderGrant(evt){evt.persist();console.log('Tapped outside',evt.nativeEvent.changedTouches);},__source:{fileName:_jsxFileName,lineNumber:265}}),children,_react.default.createElement(_reactNative.Animated.View,{style:[styles.container,{borderRadius:rippleContainerBorderRadius,backgroundColor:backgroundColorRipple.interpolate({inputRange:[0,1],outputRange:['transparent',(0,_color.default)(rippleColor).alpha(0.15).toString()]})}],__source:{fileName:_jsxFileName,lineNumber:278}},state.ripples.map(renderRipple)))));};var _default=Ripple;exports.default=_default;
//# sourceMappingURL=Ripple.js.map