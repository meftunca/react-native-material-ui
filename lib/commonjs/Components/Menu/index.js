var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Hooks=require("../../Helpers/Hooks");var _styleGenerator=require("../../Helpers/styleGenerator");var _Ripple=_interopRequireDefault(require("../Core/Ripple"));var _jsxFileName="/Users/devloops/Desktop/reactNative/reactNativeMUI/src/Components/Menu/index.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}_reactNative.UIManager.setLayoutAnimationEnabledExperimental&&_reactNative.UIManager.setLayoutAnimationEnabledExperimental(true);var Menu=function Menu(_ref){var trigger=_ref.trigger,_ref$render=_ref.render,render=_ref$render===void 0?function(){return null;}:_ref$render,minWidth=_ref.minWidth,_ref$elevation=_ref.elevation,elevation=_ref$elevation===void 0?2:_ref$elevation,_ref$corderRadius=_ref.corderRadius,corderRadius=_ref$corderRadius===void 0?4:_ref$corderRadius,_ref$duration=_ref.duration,duration=_ref$duration===void 0?150:_ref$duration,_ref$delay=_ref.delay,delay=_ref$delay===void 0?1:_ref$delay;var contentLayout=(0,_Hooks.useLayout)();var _useState=(0,_react.useState)({oy:0,ox:0,x:0,y:0,width:0,height:0}),_useState2=(0,_slicedToArray2.default)(_useState,2),size=_useState2[0],setSize=_useState2[1];var _useDimensions$window=(0,_Hooks.useDimensions)().window,width=_useDimensions$window.width,height=_useDimensions$window.height;var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=(0,_slicedToArray2.default)(_useState5,2),modalVisible=_useState6[0],setModalVisible=_useState6[1];var triggerRef=(0,_react.useRef)(null);var fade=(0,_Hooks.useAnimation)({type:'timing',toValue:open?1:0,duration:duration,delay:delay,easing:open===false?_reactNative.Easing.bezier(0,0.4,0.7,1):_reactNative.Easing.bezier(1,0.7,0.4,0)});(0,_react.useEffect)(function(){if(triggerRef.current.measure)triggerRef.current.measure(function(ox,oy,width,height,px,py){setSize(_objectSpread({},size,{ox:ox,oy:oy,x:px,y:py,width:width,height:height}));});},[modalVisible]);(0,_react.useEffect)(function(){return function(){setModalVisible(false);setOpen(false);};},[]);(0,_react.useEffect)(function(){if(open===true)setModalVisible(true);else setTimeout(function(){setModalVisible(open);},duration);},[open]);var isTop=contentLayout.height+size.y>=height/2,isLeft=contentLayout.width+size.x>=width,top=isTop?size.y-contentLayout.height-8:size.y-8,left=isLeft?width-contentLayout.width-size.width-12:size.x-12,minWidthCalculate=size.width<(minWidth||contentLayout.width)?minWidth||contentLayout.width:size.width;return _react.default.createElement(_react.default.Fragment,null,trigger&&_react.default.createElement(_Ripple.default,(0,_extends2.default)({buttonRef:triggerRef,onPress:function onPress(){setOpen(true);}},{__source:{fileName:_jsxFileName,lineNumber:101}}),trigger),_react.default.createElement(_reactNative.Modal,{visible:modalVisible,animationType:"none",transparent:true,onDismiss:function onDismiss(){return setOpen(false);},supportedOrientations:['landscape','landscape-left','landscape-right','portrait','portrait-upside-down'],onRequestClose:function onRequestClose(){return setOpen(false);},__source:{fileName:_jsxFileName,lineNumber:112}},_react.default.createElement(_reactNative.TouchableWithoutFeedback,{style:[_reactNative.StyleSheet.absoluteFillObject],onPress:function onPress(){return setOpen(false);},__source:{fileName:_jsxFileName,lineNumber:125}},_react.default.createElement(_reactNative.View,{style:{width:'100%',height:'100%'},__source:{fileName:_jsxFileName,lineNumber:128}})),_react.default.createElement(_reactNative.View,{pointerEvents:open?'auto':'none',accessibilityViewIsModal:true,accessibilityLiveRegion:"polite",style:{position:'absolute',flexDirection:'row-reverse',top:top,left:left,width:contentLayout.width,height:contentLayout.height},__source:{fileName:_jsxFileName,lineNumber:135}},_react.default.createElement(_reactNative.Animated.View,{style:{flex:1,overflow:'hidden',alignSelf:'flex-start',minWidth:minWidthCalculate,minHeight:contentLayout.height||50},__source:{fileName:_jsxFileName,lineNumber:147}},_react.default.createElement(_reactNative.Animated.View,{onLayout:contentLayout.onLayout,collapsable:true,style:_objectSpread({margin:elevation},(0,_styleGenerator.elevationShadowStyle)(elevation),{backgroundColor:'white',transform:[{translateX:fade.interpolate({inputRange:[0,1],outputRange:[(isLeft===false?-1:1)*contentLayout.width+size.width,0]})},{translateY:fade.interpolate({inputRange:[0,1],outputRange:[(isTop===false?-1:1)*contentLayout.height+size.height,0]})}],borderRadius:corderRadius}),__source:{fileName:_jsxFileName,lineNumber:155}},render({onDismiss:function onDismiss(){setTimeout(function(){setOpen(false);},200);}}))))));};var _default=Menu;exports.default=_default;
//# sourceMappingURL=index.js.map