{"version":3,"sources":["useAnimation.tsx"],"names":["useAnimatedValue","initialValue","ref","Animated","Value","current","getInitialValue","config","toValue","useAnimation","animatedValue","animate","type","timing","start","spring","Error"],"mappings":"8GAAA,4BACA,yCAQO,GAAMA,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,YAAD,CAA0C,CACxE,GAAMC,CAAAA,GAAG,CAAG,kBAAO,GAAIC,uBAASC,KAAb,CAAmBH,YAAnB,CAAP,CAAZ,CACA,MAAOC,CAAAA,GAAG,CAACG,OAAX,CACD,CAHM,C,0CAoBP,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,MAAD,CAAgC,CACtD,GAAI,MAAOA,CAAAA,MAAM,CAACN,YAAd,GAA+B,WAAnC,CAAgD,MAAOM,CAAAA,MAAM,CAACN,YAAd,CAAhD,IACK,CACH,MAAOM,CAAAA,MAAM,CAACC,OAAd,CACD,CACF,CALD,CAUO,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,MAAD,CAAgD,CAC1E,GAAMG,CAAAA,aAAa,CAAGV,gBAAgB,CAACM,eAAe,CAACC,MAAD,CAAhB,CAAtC,CAEA,GAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,GAAIJ,MAAM,CAACK,IAAP,GAAgB,QAApB,CAA8B,CAC5BT,sBAASU,MAAT,CAAgBH,aAAhB,CAA+BH,MAA/B,EAAuCO,KAAvC,GACD,CAFD,IAEO,IAAIP,MAAM,CAACK,IAAP,GAAgB,QAApB,CAA8B,CACnCT,sBAASY,MAAT,CAAgBL,aAAhB,CAA+BH,MAA/B,EAAuCO,KAAvC,GACD,CAFM,IAEA,CAEL,KAAM,IAAIE,CAAAA,KAAJ,CAAU,8BAAgCT,MAAM,CAACK,IAAjD,CAAN,CACD,CACF,CATD,CAYA,qBAAUD,OAAV,CAAmB,CAACJ,MAAM,CAACC,OAAR,CAAnB,EAEA,MAAOE,CAAAA,aAAP,CACD,CAlBM,C","sourcesContent":["import {useRef, useEffect} from 'react';\nimport {Animated} from 'react-native';\n\n// type ToValue =\n//   | number\n//   | Animated.AnimatedValue\n//   | {x: number; y: number}\n//   | Animated.AnimatedValueXY;\n\nexport const useAnimatedValue = (initialValue: number): Animated.Value => {\n  const ref = useRef(new Animated.Value(initialValue));\n  return ref.current;\n};\n\ntype AnimationType = 'spring' | 'timing';\n\ninterface BaseAnimationConfig {\n  initialValue?: number;\n  type?: AnimationType;\n}\n\nexport type TimingAnimationConfig = BaseAnimationConfig &\n  ({type: 'timing'} & Animated.TimingAnimationConfig);\n\nexport type SpringAnimationConfig = BaseAnimationConfig &\n  ({type: 'spring'} & Animated.SpringAnimationConfig);\n\nexport type UseAnimationConfig = TimingAnimationConfig | SpringAnimationConfig;\n\nconst getInitialValue = (config: UseAnimationConfig) => {\n  if (typeof config.initialValue !== 'undefined') return config.initialValue;\n  else {\n    return config.toValue as number; // TODO deal with other types possibilities here\n  }\n};\n\n// const getAnimationType = (config: UseAnimationConfig) =>\n//   config.type || 'timing';\n\nexport const useAnimation = (config: UseAnimationConfig): Animated.Value => {\n  const animatedValue = useAnimatedValue(getInitialValue(config));\n\n  const animate = () => {\n    if (config.type === 'timing') {\n      Animated.timing(animatedValue, config).start();\n    } else if (config.type === 'spring') {\n      Animated.spring(animatedValue, config).start();\n    } else {\n      // @ts-ignore\n      throw new Error('unsupported animation type=' + config.type);\n    }\n  };\n\n  // Currently useEffect is buggy, see https://github.com/facebook/react-native/issues/21967\n  useEffect(animate, [config.toValue]);\n\n  return animatedValue;\n};\n"]}