{"version":3,"sources":["useAnimation.ts"],"names":["useAnimatedValue","initialValue","ref","Animated","Value","current","getInitialValue","config","toValue","getAnimationType","type","useAnimation","animatedValue","animate","timing","start","spring","Error"],"mappings":"8GAAA,4BACA,yCAQO,GAAMA,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,YAAD,CAA0C,CACxE,GAAMC,CAAAA,GAAG,CAAG,kBAAO,GAAIC,uBAASC,KAAb,CAAmBH,YAAnB,CAAP,CAAZ,CACA,MAAOC,CAAAA,GAAG,CAACG,OAAX,CACD,CAHM,C,0CAoBP,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,MAAD,CAAgC,CACtD,GAAI,MAAOA,CAAAA,MAAM,CAACN,YAAd,GAA+B,WAAnC,CAAgD,MAAOM,CAAAA,MAAM,CAACN,YAAd,CAAhD,IACK,CACH,MAAOM,CAAAA,MAAM,CAACC,OAAd,CACD,CACF,CALD,CAOA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACF,MAAD,QACvBA,CAAAA,MAAM,CAACG,IAAP,EAAe,QADQ,EAAzB,CAGO,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,MAAD,CAAgD,CAC1E,GAAMK,CAAAA,aAAa,CAAGZ,gBAAgB,CAACM,eAAe,CAACC,MAAD,CAAhB,CAAtC,CAEA,GAAMM,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,GAAIN,MAAM,CAACG,IAAP,GAAgB,QAApB,CAA8B,CAC5BP,sBAASW,MAAT,CAAgBF,aAAhB,CAA+BL,MAA/B,EAAuCQ,KAAvC,GACD,CAFD,IAEO,IAAIR,MAAM,CAACG,IAAP,GAAgB,QAApB,CAA8B,CACnCP,sBAASa,MAAT,CAAgBJ,aAAhB,CAA+BL,MAA/B,EAAuCQ,KAAvC,GACD,CAFM,IAEA,CAEL,KAAM,IAAIE,CAAAA,KAAJ,CAAU,8BAAgCV,MAAM,CAACG,IAAjD,CAAN,CACD,CACF,CATD,CAYA,qBAAUG,OAAV,CAAmB,CAACN,MAAM,CAACC,OAAR,CAAnB,EAEA,MAAOI,CAAAA,aAAP,CACD,CAlBM,C","sourcesContent":["import React, {useRef, useEffect} from 'react';\nimport {Animated} from 'react-native';\n\ntype ToValue =\n  | number\n  | Animated.AnimatedValue\n  | {x: number; y: number}\n  | Animated.AnimatedValueXY;\n\nexport const useAnimatedValue = (initialValue: number): Animated.Value => {\n  const ref = useRef(new Animated.Value(initialValue));\n  return ref.current;\n};\n\ntype AnimationType = 'spring' | 'timing';\n\ninterface BaseAnimationConfig {\n  initialValue?: number;\n  type?: AnimationType;\n}\n\nexport type TimingAnimationConfig = BaseAnimationConfig &\n  ({type: 'timing'} & Animated.TimingAnimationConfig);\n\nexport type SpringAnimationConfig = BaseAnimationConfig &\n  ({type: 'spring'} & Animated.SpringAnimationConfig);\n\nexport type UseAnimationConfig = TimingAnimationConfig | SpringAnimationConfig;\n\nconst getInitialValue = (config: UseAnimationConfig) => {\n  if (typeof config.initialValue !== 'undefined') return config.initialValue;\n  else {\n    return config.toValue as number; // TODO deal with other types possibilities here\n  }\n};\n\nconst getAnimationType = (config: UseAnimationConfig) =>\n  config.type || 'timing';\n\nexport const useAnimation = (config: UseAnimationConfig): Animated.Value => {\n  const animatedValue = useAnimatedValue(getInitialValue(config));\n\n  const animate = () => {\n    if (config.type === 'timing') {\n      Animated.timing(animatedValue, config).start();\n    } else if (config.type === 'spring') {\n      Animated.spring(animatedValue, config).start();\n    } else {\n      // @ts-ignore\n      throw new Error('unsupported animation type=' + config.type);\n    }\n  };\n\n  // Currently useEffect is buggy, see https://github.com/facebook/react-native/issues/21967\n  useEffect(animate, [config.toValue]);\n\n  return animatedValue;\n};\n"]}