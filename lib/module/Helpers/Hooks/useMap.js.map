{"version":3,"sources":["useMap.tsx"],"names":["useState","useMemo","useCallback","useMap","initialMap","map","set","stableActions","key","entry","prevMap","remove","omit","rest","reset","utils","get"],"mappings":"89CAAA,OAAQA,QAAR,CAAkBC,OAAlB,CAA2BC,WAA3B,KAA6C,OAA7C,CAYA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAEO,IADpBC,CAAAA,UACoB,2DADJ,EACI,eACDJ,QAAQ,CAAII,UAAJ,CADP,wCACbC,GADa,eACRC,IADQ,eAGpB,GAAMC,CAAAA,aAAa,CAAGN,OAAO,CAC3B,iBAAO,CACLK,GAAG,CAAE,aAACE,GAAD,CAAMC,KAAN,CAAgB,CACnBH,IAAG,CAAC,SAAAI,OAAO,0BACNA,OADM,oBAERF,GAFQ,CAEFC,KAFE,IAAR,CAAH,CAID,CANI,CAOLE,MAAM,CAAE,gBAAAH,GAAG,CAAI,CACbF,IAAG,CAAC,SAAAI,OAAO,CAAI,IACCE,CAAAA,IADD,CACkBF,OADlB,CACLF,GADK,EACUK,IADV,0BACkBH,OADlB,EACLF,GADK,uBAEb,MAAOK,CAAAA,IAAP,CACD,CAHE,CAAH,CAID,CAZI,CAaLC,KAAK,CAAE,uBAAMR,CAAAA,IAAG,CAACF,UAAD,CAAT,EAbF,CAAP,EAD2B,CAgB3B,CAACE,IAAD,CAhB2B,CAA7B,CAmBA,GAAMS,CAAAA,KAAK,gBACTC,GAAG,CAAEd,WAAW,CAAC,SAAAM,GAAG,QAAIH,CAAAA,GAAG,CAACG,GAAD,CAAP,EAAJ,CAAkB,CAACH,GAAD,CAAlB,CADP,EAENE,aAFM,CAAX,CAKA,MAAO,CAACF,GAAD,CAAMU,KAAN,CAAP,CACD,CA9BD,CAgCA,cAAeZ,CAAAA,MAAf","sourcesContent":["import {useState, useMemo, useCallback} from 'react';\n\nexport interface StableActions<T extends object> {\n  set: <K extends keyof T>(key: K, value: T[K]) => void;\n  remove: <K extends keyof T>(key: K) => void;\n  reset: () => void;\n}\n\nexport interface Actions<T extends object> extends StableActions<T> {\n  get: <K extends keyof T>(key: K) => T[K];\n}\n\nconst useMap = <T extends object = any>(\n  initialMap: T = {} as T,\n): [T, Actions<T>] => {\n  const [map, set] = useState<T>(initialMap);\n\n  const stableActions = useMemo<StableActions<T>>(\n    () => ({\n      set: (key, entry) => {\n        set(prevMap => ({\n          ...prevMap,\n          [key]: entry,\n        }));\n      },\n      remove: key => {\n        set(prevMap => {\n          const {[key]: omit, ...rest} = prevMap;\n          return rest as T;\n        });\n      },\n      reset: () => set(initialMap),\n    }),\n    [set],\n  );\n\n  const utils = {\n    get: useCallback(key => map[key], [map]),\n    ...stableActions,\n  } as Actions<T>;\n\n  return [map, utils];\n};\n\nexport default useMap;\n"]}