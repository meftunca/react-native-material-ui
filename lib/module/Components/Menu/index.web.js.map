{"version":3,"sources":["index.web.tsx"],"names":["React","useRef","useState","useEffect","View","Animated","Easing","TouchableWithoutFeedback","StyleSheet","useDimensions","useLayout","useAnimation","elevationShadowStyle","Ripple","usePortal","Menu","trigger","render","minWidth","elevation","corderRadius","duration","delay","contentLayout","mounted","isMounted","oy","ox","x","y","width","height","size","setSize","window","openPortal","closePortal","isOpen","Portal","triggerRef","fade","type","toValue","easing","bezier","current","measure","px","py","setTimeout","isTop","isLeft","top","left","minWidthCalculate","buttonRef","onPress","absoluteFillObject","display","position","flexDirection","flex","overflow","alignSelf","minHeight","onLayout","margin","backgroundColor","transform","translateX","interpolate","inputRange","outputRange","translateY","borderRadius","onDismiss"],"mappings":"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","sourcesContent":["import React, {useRef, useState, useEffect} from 'react';\nimport {\n  View,\n  Animated,\n  Easing,\n  Modal,\n  TouchableWithoutFeedback,\n  StyleSheet,\n} from 'react-native';\nimport {useDimensions, useLayout, useAnimation} from '../../Helpers/Hooks';\nimport {elevationShadowStyle} from '../../Helpers/styleGenerator';\nimport Ripple from '../Core/Ripple';\nimport usePortal from '../../Helpers/Hooks/usePortal.web';\ninterface renderType {\n  onDismiss?: () => void | null;\n}\ninterface MenuProps {\n  children?: React.ReactNode;\n  trigger?: JSX.Element;\n  render?: React.FC<renderType> | undefined;\n  corderRadius?: number;\n  duration?: number;\n  delay?: number;\n  minWidth?: number;\n  elevation?: number;\n}\nconst Menu: React.FC<MenuProps> = ({\n  trigger,\n  render = () => null,\n  minWidth,\n  elevation = 2,\n  corderRadius = 4,\n  duration = 150,\n  delay = 1,\n}) => {\n  const contentLayout = useLayout();\n  const [mounted, isMounted] = useState(false);\n  const [size, setSize] = useState({\n    oy: 0,\n    ox: 0,\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  });\n  const {width, height} = useDimensions().window;\n  const {openPortal, closePortal, isOpen, Portal} = usePortal({});\n\n  const triggerRef: any = useRef(null);\n  useEffect(() => {\n    isMounted(true);\n  }, []);\n  const fade = useAnimation({\n    type: 'timing',\n    toValue: isOpen ? 1 : 0,\n    duration,\n    delay,\n    easing:\n      isOpen === false\n        ? Easing.bezier(0, 0.4, 0.7, 1)\n        : Easing.bezier(1, 0.7, 0.4, 0),\n  });\n  useEffect(() => {\n    if (triggerRef.current.measure)\n      triggerRef.current.measure(\n        (\n          ox: number,\n          oy: number,\n          width: number,\n          height: number,\n          px: number,\n          py: number,\n        ) => {\n          setSize({...size, ox, oy, x: px, y: py, width, height});\n        },\n      );\n  }, [isOpen]);\n  useEffect(() => {\n    return () => {\n      closePortal();\n    };\n  }, []);\n  useEffect(() => {\n    if (isOpen === true) openPortal(true);\n    else\n      setTimeout(() => {\n        closePortal();\n      }, duration);\n  }, [isOpen]);\n  let isTop = contentLayout.height + size.y >= height / 2,\n    isLeft = contentLayout.width + size.x >= width,\n    top = isTop ? size.y - contentLayout.height - 8 : size.y - 8,\n    left = isLeft ? width - contentLayout.width - size.width - 12 : size.x - 12,\n    minWidthCalculate =\n      size.width < (minWidth || contentLayout.width)\n        ? minWidth || contentLayout.width\n        : size.width;\n  return (\n    <>\n      {trigger && (\n        <Ripple\n          {...{\n            buttonRef: triggerRef,\n            onPress: () => {\n              openPortal(true);\n            },\n          }}>\n          {trigger}\n        </Ripple>\n      )}\n\n      <Portal>\n        {mounted && (\n          <>\n            <TouchableWithoutFeedback\n              style={[StyleSheet.absoluteFillObject]}\n              onPress={() => closePortal()}>\n              <View\n                style={{\n                  width: '100%',\n                  height: '100%',\n                }}\n              />\n            </TouchableWithoutFeedback>\n            <View\n              pointerEvents={isOpen ? 'auto' : 'none'}\n              accessibilityViewIsModal\n              accessibilityLiveRegion=\"polite\"\n              style={{\n                display: isOpen ? 'flex' : 'none',\n                position: 'absolute',\n                flexDirection: 'row-reverse',\n                top,\n                left,\n                width: contentLayout.width,\n                height: contentLayout.height,\n              }}>\n              <Animated.View\n                style={{\n                  flex: 1,\n                  overflow: 'hidden',\n                  alignSelf: 'flex-start',\n                  minWidth: minWidthCalculate,\n                  minHeight: contentLayout.height || 50,\n                }}>\n                <Animated.View\n                  onLayout={contentLayout.onLayout}\n                  collapsable\n                  style={{\n                    margin: elevation,\n                    ...elevationShadowStyle(elevation),\n                    backgroundColor: 'white',\n                    transform: [\n                      {\n                        translateX: fade.interpolate({\n                          inputRange: [0, 1],\n                          outputRange: [\n                            (isLeft === false ? -1 : 1) * contentLayout.width +\n                              size.width,\n                            0,\n                          ],\n                        }),\n                      },\n                      {\n                        translateY: fade.interpolate({\n                          inputRange: [0, 1],\n                          outputRange: [\n                            (isTop === false ? -1 : 1) * contentLayout.height +\n                              size.height,\n                            0,\n                          ],\n                        }),\n                      },\n                    ],\n\n                    borderRadius: corderRadius,\n                  }}>\n                  {render({\n                    onDismiss: () => {\n                      setTimeout(() => {\n                        closePortal();\n                      }, 200);\n                    },\n                  })}\n                </Animated.View>\n              </Animated.View>\n            </View>\n          </>\n        )}\n      </Portal>\n    </>\n  );\n};\n\nexport default Menu;\n"]}