{"version":3,"sources":["index.tsx"],"names":["React","useRef","useState","useEffect","View","Animated","Easing","Modal","TouchableWithoutFeedback","StyleSheet","UIManager","useDimensions","useLayout","elevationShadowStyle","Ripple","setLayoutAnimationEnabledExperimental","Menu","trigger","render","minWidth","elevation","corderRadius","duration","contentLayout","oy","ox","x","y","width","height","size","setSize","window","open","setOpen","modalVisible","setModalVisible","dropdown","Value","current","fade","triggerRef","measure","px","py","setTimeout","parallel","timing","toValue","delay","easing","bezier","start","isTop","isLeft","top","left","minWidthCalculate","buttonRef","onPress","absoluteFillObject","position","flexDirection","flex","overflow","alignSelf","minHeight","onLayout","margin","backgroundColor","transform","translateX","interpolate","inputRange","outputRange","translateY","borderRadius","onDismiss"],"mappings":"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","sourcesContent":["import React, {useRef, useState, useEffect} from 'react';\nimport {\n  View,\n  Animated,\n  Easing,\n  Modal,\n  TouchableWithoutFeedback,\n  StyleSheet,\n  UIManager,\n} from 'react-native';\nimport {useDimensions, useLayout} from './../../Helpers/Hooks';\nimport {elevationShadowStyle} from 'Helpers/styleGenerator';\nimport Ripple from 'Components/Core/Ripple';\nUIManager.setLayoutAnimationEnabledExperimental &&\n  UIManager.setLayoutAnimationEnabledExperimental(true);\n\ninterface renderType {\n  onDismiss?: () => void | null;\n}\ninterface MenuProps {\n  children?: React.ReactNode;\n  trigger?: JSX.Element;\n  render?: React.FC<renderType> | undefined;\n  corderRadius?: number;\n  duration?: number;\n  minWidth?: number;\n  elevation?: number;\n}\nconst Menu: React.FC<MenuProps> = ({\n  trigger,\n  render = () => null,\n  minWidth,\n  elevation = 5,\n  corderRadius = 4,\n  duration = 1000,\n}) => {\n  const contentLayout = useLayout();\n  const [size, setSize] = useState({\n    oy: 0,\n    ox: 0,\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  });\n  const {width, height} = useDimensions().window;\n  const [open, setOpen] = useState<boolean>(false);\n  const [modalVisible, setModalVisible] = useState<boolean>(false);\n  const dropdown = useRef(new Animated.Value(0)).current;\n  const fade = useRef(new Animated.Value(0)).current;\n  const triggerRef: any = useRef(null);\n  useEffect(() => {\n    if (triggerRef.current.measure)\n      triggerRef.current.measure(\n        (\n          ox: number,\n          oy: number,\n          width: number,\n          height: number,\n          px: number,\n          py: number,\n        ) => {\n          setSize({...size, ox, oy, x: px, y: py, width, height});\n        },\n      );\n\n    return () => {\n      setModalVisible(false);\n      setOpen(false);\n    };\n  }, []);\n  useEffect(() => {\n    if (open === true) setModalVisible(true);\n    else\n      setTimeout(() => {\n        setModalVisible(open);\n      }, duration / 4);\n\n    Animated.parallel([\n      Animated.timing(dropdown, {\n        toValue: open ? minWidth || contentLayout.width : 0,\n        duration: duration,\n        delay: 1,\n        easing:\n          open === false\n            ? Easing.bezier(0, 0.4, 0.7, 1)\n            : Easing.bezier(1, 0.7, 0.4, 0),\n      }),\n      Animated.timing(fade, {\n        toValue: open ? 1 : 0,\n        duration: 150,\n        delay: 1,\n        easing:\n          open === false\n            ? Easing.bezier(0, 0.4, 0.7, 1)\n            : Easing.bezier(1, 0.7, 0.4, 0),\n      }),\n    ]).start();\n  }, [open]);\n  let isTop = contentLayout.height + size.y > height - 50,\n    isLeft = contentLayout.width + size.x > width,\n    top = isTop ? size.y - contentLayout.height : size.y,\n    left = isLeft ? width - contentLayout.width - size.width : size.x + 18,\n    minWidthCalculate =\n      size.width < (minWidth || contentLayout.width)\n        ? minWidth || contentLayout.width\n        : size.width;\n  return (\n    <>\n      {trigger && (\n        <Ripple\n          {...{\n            buttonRef: triggerRef,\n            onPress: () => {\n              setOpen(true);\n            },\n          }}>\n          {trigger}\n        </Ripple>\n      )}\n\n      <Modal\n        visible={modalVisible}\n        animationType=\"none\"\n        transparent\n        onDismiss={() => setOpen(false)}\n        supportedOrientations={[\n          'landscape',\n          'landscape-left',\n          'landscape-right',\n          'portrait',\n          'portrait-upside-down',\n        ]}\n        onRequestClose={() => setOpen(false)}>\n        <TouchableWithoutFeedback\n          style={[StyleSheet.absoluteFillObject]}\n          onPress={() => setOpen(false)}>\n          <View\n            style={{\n              // backgroundColor: 'black',\n              // opacity: 0.2,\n              width: '100%',\n              height: '100%',\n            }}\n          />\n        </TouchableWithoutFeedback>\n        <View\n          pointerEvents={open ? 'auto' : 'none'}\n          accessibilityViewIsModal\n          accessibilityLiveRegion=\"polite\"\n          style={{\n            position: 'absolute',\n            flexDirection: 'row-reverse',\n            top,\n            left,\n            width: contentLayout.width,\n            height: contentLayout.height,\n          }}>\n          <Animated.View\n            style={{\n              flex: 1,\n              overflow: 'hidden',\n              alignSelf: 'flex-start',\n              minWidth: minWidthCalculate,\n              minHeight: contentLayout.height || 50,\n            }}>\n            <Animated.View\n              onLayout={contentLayout.onLayout}\n              collapsable\n              style={{\n                margin: 9,\n                ...elevationShadowStyle(elevation),\n                backgroundColor: 'white',\n                transform: [\n                  {\n                    translateX: fade.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [\n                        (isLeft === false ? -1 : 1) *\n                          (size.x + size.width < (width / 2) * 3 ? 10 : 150),\n                        0,\n                      ],\n                    }),\n                  },\n                  {\n                    translateY: fade.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [(isTop === false ? -1 : 1) * 150, 0],\n                    }),\n                  },\n                ],\n\n                borderRadius: corderRadius,\n                // margin: elevation ? elevation : 5,\n              }}>\n              {render({\n                onDismiss: () => {\n                  setTimeout(() => {\n                    setOpen(false);\n                  }, 200);\n                },\n              })}\n            </Animated.View>\n          </Animated.View>\n        </View>\n      </Modal>\n    </>\n  );\n};\n\nexport default Menu;\n"]}