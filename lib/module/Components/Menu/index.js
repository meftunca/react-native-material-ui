import _extends from"@babel/runtime/helpers/extends";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";var _jsxFileName="/Users/devloops/Desktop/reactNative/reactNativeMUI/src/Components/Menu/index.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useRef,useState,useEffect}from'react';import{View,Animated,Easing,Modal,TouchableWithoutFeedback,StyleSheet,UIManager}from'react-native';import{useDimensions,useLayout}from'./../../Helpers/Hooks';import{elevationShadowStyle}from'Helpers/styleGenerator';import Ripple from'Components/Core/Ripple';UIManager.setLayoutAnimationEnabledExperimental&&UIManager.setLayoutAnimationEnabledExperimental(true);var Menu=function Menu(_ref){var trigger=_ref.trigger,_ref$render=_ref.render,render=_ref$render===void 0?function(){return null;}:_ref$render,minWidth=_ref.minWidth,_ref$elevation=_ref.elevation,elevation=_ref$elevation===void 0?5:_ref$elevation,_ref$corderRadius=_ref.corderRadius,corderRadius=_ref$corderRadius===void 0?4:_ref$corderRadius,_ref$duration=_ref.duration,duration=_ref$duration===void 0?1000:_ref$duration;var contentLayout=useLayout();var _useState=useState({oy:0,ox:0,x:0,y:0,width:0,height:0}),_useState2=_slicedToArray(_useState,2),size=_useState2[0],setSize=_useState2[1];var _useDimensions$window=useDimensions().window,width=_useDimensions$window.width,height=_useDimensions$window.height;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalVisible=_useState6[0],setModalVisible=_useState6[1];var dropdown=useRef(new Animated.Value(0)).current;var fade=useRef(new Animated.Value(0)).current;var triggerRef=useRef(null);useEffect(function(){if(triggerRef.current.measure)triggerRef.current.measure(function(ox,oy,width,height,px,py){setSize(_objectSpread({},size,{ox:ox,oy:oy,x:px,y:py,width:width,height:height}));});return function(){setModalVisible(false);setOpen(false);};},[]);useEffect(function(){if(open===true)setModalVisible(true);else setTimeout(function(){setModalVisible(open);},duration/4);Animated.parallel([Animated.timing(dropdown,{toValue:open?minWidth||contentLayout.width:0,duration:duration,delay:1,easing:open===false?Easing.bezier(0,0.4,0.7,1):Easing.bezier(1,0.7,0.4,0)}),Animated.timing(fade,{toValue:open?1:0,duration:150,delay:1,easing:open===false?Easing.bezier(0,0.4,0.7,1):Easing.bezier(1,0.7,0.4,0)})]).start();},[open]);var isTop=contentLayout.height+size.y>height-50,isLeft=contentLayout.width+size.x>width,top=isTop?size.y-contentLayout.height:size.y,left=isLeft?width-contentLayout.width-size.width:size.x+18,minWidthCalculate=size.width<(minWidth||contentLayout.width)?minWidth||contentLayout.width:size.width;return React.createElement(React.Fragment,null,trigger&&React.createElement(Ripple,_extends({buttonRef:triggerRef,onPress:function onPress(){setOpen(true);}},{__source:{fileName:_jsxFileName,lineNumber:111}}),trigger),React.createElement(Modal,{visible:modalVisible,animationType:"none",transparent:true,onDismiss:function onDismiss(){return setOpen(false);},supportedOrientations:['landscape','landscape-left','landscape-right','portrait','portrait-upside-down'],onRequestClose:function onRequestClose(){return setOpen(false);},__source:{fileName:_jsxFileName,lineNumber:122}},React.createElement(TouchableWithoutFeedback,{style:[StyleSheet.absoluteFillObject],onPress:function onPress(){return setOpen(false);},__source:{fileName:_jsxFileName,lineNumber:135}},React.createElement(View,{style:{width:'100%',height:'100%'},__source:{fileName:_jsxFileName,lineNumber:138}})),React.createElement(View,{pointerEvents:open?'auto':'none',accessibilityViewIsModal:true,accessibilityLiveRegion:"polite",style:{position:'absolute',flexDirection:'row-reverse',top:top,left:left,width:contentLayout.width,height:contentLayout.height},__source:{fileName:_jsxFileName,lineNumber:147}},React.createElement(Animated.View,{style:{flex:1,overflow:'hidden',alignSelf:'flex-start',minWidth:minWidthCalculate,minHeight:contentLayout.height||50},__source:{fileName:_jsxFileName,lineNumber:159}},React.createElement(Animated.View,{onLayout:contentLayout.onLayout,collapsable:true,style:_objectSpread({margin:9},elevationShadowStyle(elevation),{backgroundColor:'white',transform:[{translateX:fade.interpolate({inputRange:[0,1],outputRange:[(isLeft===false?-1:1)*(size.x+size.width<width/2*3?10:150),0]})},{translateY:fade.interpolate({inputRange:[0,1],outputRange:[(isTop===false?-1:1)*150,0]})}],borderRadius:corderRadius}),__source:{fileName:_jsxFileName,lineNumber:167}},render({onDismiss:function onDismiss(){setTimeout(function(){setOpen(false);},200);}}))))));};export default Menu;
//# sourceMappingURL=index.js.map